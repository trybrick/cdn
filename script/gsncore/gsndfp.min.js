/*!
 * gsndfp
 * version 1.1.0
 * Requires jQuery 1.7.1 or higher
 * git@github.com:gsn/gsndfp.git
 * License: Grocery Shopping Network
 *          MIT from derived work of Copyright (c) 2013 Matt Cooper: https://github.com/coop182/jquery.dfp.js  v1.0.18
 */
!function($,window){"use strict";var $adCollection,bodyTemplate,count,createAds,dfpBlocked,dfpID,dfpIsLoaded,dfpLoader,dfpOptions,dfpScript,dfpSelector,displayAds,getDimensions,getID,init,isInView,rendered,sessionStorageX,setOptions,storeAs;sessionStorageX=sessionStorage,"undefined"==typeof sessionStorageX&&(sessionStorageX={getItem:function(){},setItem:function(){}}),dfpScript=this,dfpID="",count=0,rendered=0,dfpSelector=".circplus",dfpOptions={},dfpIsLoaded=!1,$adCollection=void 0,storeAs="circplus",bodyTemplate='<div class="gsn-slot-container"><div class="cpslot cpslot2" data-companion="true" data-dimensions="300x50"></div></div><div class="gsn-slot-container"><div class="cpslot cpslot1" data-dimensions="300x100,300x120"></div></div>',init=function(e,t,n){dfpID=e,""===$(t).html()&&$(t).html(n.templateSelector?$(n.templateSelector).html():n.bodyTemplate||bodyTemplate),$adCollection=$($(".cpslot").get().reverse()),dfpLoader(),setOptions(n),$(function(){createAds(),displayAds()})},setOptions=function(e){dfpOptions={setTargeting:{},setCategoryExclusion:"",setLocation:"",enableSingleRequest:!1,collapseEmptyDivs:!0,refreshExisting:!0,disablePublisherConsole:!1,disableInitialLoad:!1,inViewOnly:!0,noFetch:!1},$.extend(!0,dfpOptions,e),dfpOptions.googletag&&window.googletag.cmd.push(function(){$.extend(!0,window.googletag,dfpOptions.googletag)})},createAds=function(){$adCollection.each(function(){var $adUnit,$existingContent,adUnitID,dimensions;$adUnit=$(this),count++,adUnitID=getID($adUnit,"gsncircplus",count),dimensions=getDimensions($adUnit),$existingContent=$adUnit.html(),$adUnit.html("").addClass("display-none"),window.googletag.cmd.push(function(){var $adUnitData,companion,exclusions,exclusionsGroup,googleAdUnit,targeting,valueTrimmed;googleAdUnit=void 0,$adUnitData=$adUnit.data(storeAs),$adUnitData||(dfpID=dfpID.replace(/(\/\/)+/gi,"/").replace(/\s+/gi,"").replace(/(\/)$/,"/"),0!==dfpID.indexOf("/")&&(dfpID="/"+dfpID),googleAdUnit=$adUnit.data("outofpage")?window.googletag.defineOutOfPageSlot(dfpID,adUnitID).addService(window.googletag.pubads()):window.googletag.defineSlot(dfpID,dimensions,adUnitID).addService(window.googletag.pubads()),companion=$adUnit.data("companion"),companion&&googleAdUnit.addService(window.googletag.companionAds()),targeting=$adUnit.data("targeting"),targeting&&("string"==typeof targeting&&(targeting=eval("("+targeting+")")),$.each(targeting,function(e,t){"brand"===e&&sessionStorageX.setItem("brand",t),googleAdUnit.setTargeting(e,t)})),exclusions=$adUnit.data("exclusions"),exclusions&&(exclusionsGroup=exclusions.split(","),valueTrimmed=void 0,$.each(exclusionsGroup,function(e,t){valueTrimmed=$.trim(t),valueTrimmed.length>0&&googleAdUnit.setCategoryExclusion(valueTrimmed)})),googleAdUnit.oldRenderEnded=googleAdUnit.oldRenderEnded||googleAdUnit.renderEnded,googleAdUnit.renderEnded=function(){var e;rendered++,e=$adUnit.css("display"),$adUnit.removeClass("display-none").addClass("display-"+e),googleAdUnit.oldRenderEnded(),"function"==typeof dfpOptions.afterEachAdLoaded&&dfpOptions.afterEachAdLoaded.call(this,$adUnit),"function"==typeof dfpOptions.afterAllAdsLoaded&&rendered===count&&dfpOptions.afterAllAdsLoaded.call(this,$adCollection)},$adUnit.data(storeAs,googleAdUnit))})}),window.googletag.cmd.push(function(){var e,t;"undefined"==typeof dfpOptions.setTargeting.brand&&sessionStorageX.getItem("brand")&&(dfpOptions.setTargeting.brand=sessionStorageX.getItem("brand")),dfpOptions.enableSingleRequest===!0&&window.googletag.pubads().enableSingleRequest(),$.each(dfpOptions.setTargeting,function(e,t){"brand"===e&&sessionStorageX.setItem("brand",t),window.googletag.pubads().setTargeting(e,t)}),"object"==typeof dfpOptions.setLocation&&("number"==typeof dfpOptions.setLocation.latitude&&"number"==typeof dfpOptions.setLocation.longitude&&"number"==typeof dfpOptions.setLocation.precision?window.googletag.pubads().setLocation(dfpOptions.setLocation.latitude,dfpOptions.setLocation.longitude,dfpOptions.setLocation.precision):"number"==typeof dfpOptions.setLocation.latitude&&"number"==typeof dfpOptions.setLocation.longitude&&window.googletag.pubads().setLocation(dfpOptions.setLocation.latitude,dfpOptions.setLocation.longitude)),dfpOptions.setCategoryExclusion.length>0&&(e=dfpOptions.setCategoryExclusion.split(","),t=void 0,$.each(e,function(e,n){t=$.trim(n),t.length>0&&window.googletag.pubads().setCategoryExclusion(t)})),(dfpOptions.collapseEmptyDivs===!0||"original"===dfpOptions.collapseEmptyDivs)&&window.googletag.pubads().collapseEmptyDivs(),dfpOptions.disablePublisherConsole===!0&&window.googletag.pubads().disablePublisherConsole(),dfpOptions.disableInitialLoad===!0&&window.googletag.pubads().disableInitialLoad(),dfpOptions.noFetch===!0&&window.googletag.pubads().noFetch(),window.googletag.companionAds().setRefreshUnfilledSlots(!0),window.googletag.enableServices()})},isInView=function(e){var t,n,i,o;return n=$(window).scrollTop(),t=n+$(window).height(),o=e.offset().top,i=o+e.height(),o+(i-o)/2>=n&&t>=o+(i-o)/2},displayAds=function(){var e;e=[],$adCollection.each(function(){var t,n;t=$(this),n=t.data(storeAs),dfpOptions.refreshExisting&&n&&t.data("gsnDfpExisting")?(!dfpOptions.inViewOnly||isInView(t)&&t.is(":visible"))&&e.push(n):(t.data("gsnDfpExisting",!0),window.googletag.cmd.push(function(){window.googletag.display(t.attr("id"))}))}),e.length>0&&window.googletag.cmd.push(function(){window.googletag.pubads().refresh(e)})},getID=function(e,t,n){return dfpOptions.refreshExisting||(e.data(storeAs,null),e.data("gsnDfpExisting",null),e.attr("id")&&e.attr("id",t+"-auto-gen-id-"+n)),e.attr("id")||e.attr("id",t+"-auto-gen-id-"+n).attr("id")},getDimensions=function(e){var t,n,i;return n=[],i=e.data("dimensions"),i?(t=i.split(","),$.each(t,function(e,t){var i;i=t.split("x"),n.push([parseInt(i[0],10),parseInt(i[1],10)])})):n.push([e.width(),e.height()]),n},dfpLoader=function(){var e,t,n;dfpIsLoaded=dfpIsLoaded||$('script[src*="googletagservices.com/tag/js/gpt.js"]').length,dfpIsLoaded||(window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[],e=document.createElement("script"),e.async=!0,e.type="text/javascript",e.onerror=function(){dfpBlocked()},n="https:"===document.location.protocol,e.src=(n?"https:":"http:")+"//www.googletagservices.com/tag/js/gpt.js",t=document.getElementsByTagName("script")[0],t.parentNode.insertBefore(e,t),"none"===e.style.display&&dfpBlocked())},dfpBlocked=function(){var e;e=window.googletag.cmd,setTimeout(function(){var t;t=function(e,t,n){return window.googletag.ads.push(n),window.googletag.ads[n]={renderEnded:function(){},addService:function(){return this}},window.googletag.ads[n]},window.googletag={cmd:{push:function(e){e.call(dfpScript)}},ads:[],pubads:function(){return this},noFetch:function(){return this},disableInitialLoad:function(){return this},disablePublisherConsole:function(){return this},enableSingleRequest:function(){return this},setTargeting:function(){return this},collapseEmptyDivs:function(){return this},enableServices:function(){return this},defineSlot:function(e,n,i){return t(e,n,i,!1)},defineOutOfPageSlot:function(e,n){return t(e,[],n,!0)},display:function(e){return window.googletag.ads[e].renderEnded.call(dfpScript),this}},$.each(e,function(e,t){window.googletag.cmd.push(t)})},50)},$.circPlus=$.fn.circPlus=function(e,t){var n;return t=t||{},void 0===e&&(e=dfpID),"object"==typeof e&&(t=e,e=t.dfpID||dfpID),n=this,"function"==typeof this&&(n=dfpSelector),init(e,n,t),this}}(window.jQuery||window.Zepto||window.tire||window.$,window),function($,window){"use strict";var $adCollection,count,createAds,dfpBlocked,dfpID,dfpIsLoaded,dfpLoader,dfpOptions,dfpScript,dfpSelector,displayAds,getDimensions,getID,init,isInView,rendered,sessionStorageX,setOptions,storeAs;sessionStorageX=sessionStorage,"undefined"==typeof sessionStorageX&&(sessionStorageX={getItem:function(){},setItem:function(){}}),dfpScript=this,dfpID="",count=0,rendered=0,dfpSelector=".gsnunit",dfpOptions={},dfpIsLoaded=!1,$adCollection=void 0,storeAs="gsnUnit",init=function(e,t,n){dfpID=e,$adCollection=$(t),dfpLoader(),setOptions(n),$(function(){createAds(),displayAds()})},setOptions=function(e){dfpOptions={setTargeting:{},setCategoryExclusion:"",setLocation:"",enableSingleRequest:!1,collapseEmptyDivs:!0,refreshExisting:!0,disablePublisherConsole:!1,disableInitialLoad:!1,inViewOnly:!0,noFetch:!1},$.extend(!0,dfpOptions,e),dfpOptions.googletag&&window.googletag.cmd.push(function(){$.extend(!0,window.googletag,dfpOptions.googletag)})},createAds=function(){$adCollection.each(function(){var $adUnit,$existingContent,adUnitID,dimensions;$adUnit=$(this),count++,adUnitID=getID($adUnit,"gsn",count),dimensions=getDimensions($adUnit),$existingContent=$adUnit.html(),$adUnit.html("").addClass("display-none"),window.googletag.cmd.push(function(){var $adUnitData,exclusions,exclusionsGroup,googleAdUnit,targeting,valueTrimmed;googleAdUnit=void 0,$adUnitData=$adUnit.data(storeAs),$adUnitData||(dfpID=dfpID.replace(/(\/\/)+/gi,"/").replace(/\s+/gi,"").replace(/(\/)$/,"/"),0!==dfpID.indexOf("/")&&(dfpID="/"+dfpID),googleAdUnit=$adUnit.data("outofpage")?window.googletag.defineOutOfPageSlot(dfpID,adUnitID).addService(window.googletag.pubads()):window.googletag.defineSlot(dfpID,dimensions,adUnitID).addService(window.googletag.pubads()),targeting=$adUnit.data("targeting"),targeting&&("string"==typeof targeting&&(targeting=eval("("+targeting+")")),$.each(targeting,function(e,t){"brand"===e&&sessionStorageX.setItem("brand",t),googleAdUnit.setTargeting(e,t)})),exclusions=$adUnit.data("exclusions"),exclusions&&(exclusionsGroup=exclusions.split(","),valueTrimmed=void 0,$.each(exclusionsGroup,function(e,t){valueTrimmed=$.trim(t),valueTrimmed.length>0&&googleAdUnit.setCategoryExclusion(valueTrimmed)})),googleAdUnit.oldRenderEnded=googleAdUnit.oldRenderEnded||googleAdUnit.renderEnded,googleAdUnit.renderEnded=function(){var e;rendered++,e=$adUnit.css("display"),$adUnit.removeClass("display-none").addClass("display-"+e),googleAdUnit.oldRenderEnded(),"function"==typeof dfpOptions.afterEachAdLoaded&&dfpOptions.afterEachAdLoaded.call(this,$adUnit),"function"==typeof dfpOptions.afterAllAdsLoaded&&rendered===count&&dfpOptions.afterAllAdsLoaded.call(this,$adCollection)},$adUnit.data(storeAs,googleAdUnit))})}),window.googletag.cmd.push(function(){var e,t;"undefined"==typeof dfpOptions.setTargeting.brand&&sessionStorageX.getItem("brand")&&(dfpOptions.setTargeting.brand=sessionStorageX.getItem("brand")),dfpOptions.enableSingleRequest===!0&&window.googletag.pubads().enableSingleRequest(),$.each(dfpOptions.setTargeting,function(e,t){"brand"===e&&sessionStorageX.setItem("brand",t),window.googletag.pubads().setTargeting(e,t)}),"object"==typeof dfpOptions.setLocation&&("number"==typeof dfpOptions.setLocation.latitude&&"number"==typeof dfpOptions.setLocation.longitude&&"number"==typeof dfpOptions.setLocation.precision?window.googletag.pubads().setLocation(dfpOptions.setLocation.latitude,dfpOptions.setLocation.longitude,dfpOptions.setLocation.precision):"number"==typeof dfpOptions.setLocation.latitude&&"number"==typeof dfpOptions.setLocation.longitude&&window.googletag.pubads().setLocation(dfpOptions.setLocation.latitude,dfpOptions.setLocation.longitude)),dfpOptions.setCategoryExclusion.length>0&&(e=dfpOptions.setCategoryExclusion.split(","),t=void 0,$.each(e,function(e,n){t=$.trim(n),t.length>0&&window.googletag.pubads().setCategoryExclusion(t)})),dfpOptions.collapseEmptyDivs&&window.googletag.pubads().collapseEmptyDivs(),dfpOptions.disablePublisherConsole===!0&&window.googletag.pubads().disablePublisherConsole(),dfpOptions.disableInitialLoad===!0&&window.googletag.pubads().disableInitialLoad(),dfpOptions.noFetch===!0&&window.googletag.pubads().noFetch(),window.googletag.enableServices()})},isInView=function(e){var t,n,i,o;return n=$(window).scrollTop(),t=n+$(window).height(),o=e.offset().top,i=o+e.height(),o+(i-o)/2>=n&&t>=o+(i-o)/2},displayAds=function(){var e;e=[],$adCollection.each(function(){var t,n;t=$(this),n=t.data(storeAs),dfpOptions.refreshExisting&&n&&t.data("gsnDfpExisting")?(!dfpOptions.inViewOnly||isInView(t)&&t.is(":visible"))&&e.push(n):(t.data("gsnDfpExisting",!0),window.googletag.cmd.push(function(){window.googletag.display(t.attr("id"))}))}),e.length>0&&window.googletag.cmd.push(function(){window.googletag.pubads().refresh(e)})},getID=function(e,t,n){return dfpOptions.refreshExisting||(e.data(storeAs,null),e.data("gsnDfpExisting",null),e.attr("id")&&e.attr("id",t+"-auto-gen-id-"+n)),e.attr("id")||e.attr("id",t+"-auto-gen-id-"+n).attr("id")},getDimensions=function(e){var t,n,i;return n=[],i=e.data("dimensions"),i?(t=i.split(","),$.each(t,function(e,t){var i;i=t.split("x"),n.push([parseInt(i[0],10),parseInt(i[1],10)])})):n.push([e.width(),e.height()]),n},dfpLoader=function(){var e,t,n;dfpIsLoaded=dfpIsLoaded||$('script[src*="googletagservices.com/tag/js/gpt.js"]').length,dfpIsLoaded||(window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[],e=document.createElement("script"),e.async=!0,e.type="text/javascript",e.onerror=function(){dfpBlocked()},n="https:"===document.location.protocol,e.src=(n?"https:":"http:")+"//www.googletagservices.com/tag/js/gpt.js",t=document.getElementsByTagName("script")[0],t.parentNode.insertBefore(e,t),"none"===e.style.display&&dfpBlocked())},dfpBlocked=function(){var e;e=window.googletag.cmd,setTimeout(function(){var t;t=function(e,t,n){return window.googletag.ads.push(n),window.googletag.ads[n]={renderEnded:function(){},addService:function(){return this}},window.googletag.ads[n]},window.googletag={cmd:{push:function(e){e.call(dfpScript)}},ads:[],pubads:function(){return this},noFetch:function(){return this},disableInitialLoad:function(){return this},disablePublisherConsole:function(){return this},enableSingleRequest:function(){return this},setTargeting:function(){return this},collapseEmptyDivs:function(){return this},enableServices:function(){return this},defineSlot:function(e,n,i){return t(e,n,i,!1)},defineOutOfPageSlot:function(e,n){return t(e,[],n,!0)},display:function(e){return window.googletag.ads[e].renderEnded.call(dfpScript),this}},$.each(e,function(e,t){window.googletag.cmd.push(t)})},50)},$.gsnDfp=$.fn.gsnDfp=function(e,t){var n;return t=t||{},void 0===e&&(e=dfpID),"object"==typeof e&&(t=e,e=t.dfpID||dfpID),n=this,"function"==typeof this&&(n=dfpSelector),init(e,n,t),this}}(window.jQuery||window.Zepto||window.tire||window.$,window),function($,window,doc){"use strict";var $adCollection,advertUrl,clean,clearCookie,count,createAds,cssUrl,dfpBlocked,dfpID,dfpIsLoaded,dfpLoader,dfpOptions,dfpScript,dfpSelector,didOpen,displayAds,getCookie,getDimensions,getID,getPopup,init,onCloseCallback,onOpenCallback,rendered,sessionStorageX,setAdvertisingTester,setCookie,setOptions,setResponsiveCss,storeAs;sessionStorageX=sessionStorage,"undefined"==typeof sessionStorageX&&(sessionStorageX={getItem:function(){},setItem:function(){}}),dfpScript=this,dfpID="",count=0,rendered=0,dfpSelector=".gsnsw",dfpOptions={},dfpIsLoaded=!1,$adCollection=void 0,storeAs="gsnsw",cssUrl="//cdn.gsngrocers.com/script/sw2/1.1.0/sw2-override.css",advertUrl="//cdn.gsngrocers.com/script/sw2/1.1.0/advertisement.js",didOpen=!1,init=function(e,t,n){var i,o;setOptions(n),o=dfpOptions.cssUrl||cssUrl,i=dfpOptions.advertUrl||advertUrl,dfpOptions.cancel&&onCloseCallback({cancel:!0}),setResponsiveCss(o),setAdvertisingTester(i),null===getCookie("gsnsw2")?(dfpID=e,dfpLoader(),getPopup(t),Gsn.Advertising.on("clickBrand",function(){$(".sw-close").click()})):onCloseCallback({cancel:!0})},setResponsiveCss=function(e){var t,n,i;return n=document.getElementById("respo"),null==n?(i=document.getElementsByTagName("head").item(0),t=document.createElement("link"),t.setAttribute("href",e),t.setAttribute("rel","stylesheet"),t.setAttribute("id","respo"),i.appendChild(t)):void 0},setAdvertisingTester=function(e){var t,n,i;return n=document.getElementById("advertScript"),null==n?(t=document.getElementsByTagName("head").item(0),i=document.createElement("script"),i.setAttribute("src",e),i.setAttribute("id","advertScript"),t.appendChild(i)):void 0},onOpenCallback=function(){didOpen=!0,setTimeout(function(){"undefined"==typeof gsnGlobalTester&&(jQuery(".sw-msg").show(),jQuery(".sw-header-copy").hide(),jQuery(".sw-row").hide())},150)},onCloseCallback=function(){$(".sw-pop").remove(),$(".lean-overlay").remove(),window.scrollTo(0,0),null===getCookie("gsnsw2")&&setCookie("gsnsw2",Gsn.Advertising.gsnNetworkId+","+Gsn.Advertising.enableCircPlus,1),"function"==typeof dfpOptions.onClose&&dfpOptions.onClose(didOpen)},getPopup=function(e){var t,n;n=Gsn.Advertising.apiUrl+"/ShopperWelcome/Get/"+Gsn.Advertising.gsnid,t="json",doc.addEventListener||(n+="?callback=?",t="jsonp"),$.ajax({url:n,dataType:t,success:function(t){var n,i,o,s;t&&(Gsn.Advertising.gsnNetworkId||(Gsn.Advertising.gsnNetworkId=t.NetworkId),Gsn.Advertising.enableCircPlus=t.EnableCircPlus,i=t.Template),dfpID=Gsn.Advertising.gsnNetworkId,s={data:t,cancel:!1},dfpOptions.onData(s),s.cancel&&(i=null),i?(i=i.replace(/%%CACHEBUSTER%%/g,(new Date).getTime()).replace(/%%CHAINID%%/g,Gsn.Advertising.gsnid),0===$("#sw").length&&(n=document.getElementsByTagName("body").item(0),o=document.createElement("div"),o.setAttribute("id","sw"),n.appendChild(o)),$("#sw").html(clean(i)),$adCollection=$(e),$adCollection&&(createAds(),displayAds(),$(".sw-pop").easyModal({autoOpen:!0,closeOnEscape:!1,onClose:onCloseCallback,onOpen:onOpenCallback,top:25}))):onCloseCallback({cancel:!0})}})},clean=function(e){var t;return t=$(e.trim()),$(".remove",t).remove(),t.prop("outerHTML")},getCookie=function(e){var t,n,i,o;return document.cookie.length>0&&(t=document.cookie.indexOf(e+"="),o=0,-1!==t)?(t+=e.length+1,o=document.cookie.indexOf(";",t),-1===o&&(o=document.cookie.length),n=decodeURI(document.cookie.substring(t,o)),n.indexOf(",")>0&&(i=n.split(","),Gsn.Advertising.gsnNetworkId=i[0],Gsn.Advertising.enableCircPlus=n[1]),n):null},setCookie=function(e,t,n){var i;i=new Date,i.setTime(i.getTime()+24*n*3600*1e3),document.cookie=e+"="+encodeURI(t)+(null===n?"":"; expires="+i.toGMTString())+"; path=/"},clearCookie=function(e){e===getCookie(e)&&(document.cookie=e+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT")},setOptions=function(e){dfpOptions={setTargeting:{},setCategoryExclusion:"",setLocation:"",enableSingleRequest:!1,collapseEmptyDivs:!0,refreshExisting:!0,disablePublisherConsole:!1,disableInitialLoad:!1,noFetch:!1},$.extend(!0,dfpOptions,e),dfpOptions.googletag&&window.googletag.cmd.push(function(){$.extend(!0,window.googletag,dfpOptions.googletag)})},createAds=function(){$adCollection.each(function(){var $adUnit,$existingContent,adUnitID,dimensions;$adUnit=$(this),count++,adUnitID=getID($adUnit,"gsnsw",count),dimensions=getDimensions($adUnit),$existingContent=$adUnit.html(),$adUnit.html("").addClass("display-none"),window.googletag.cmd.push(function(){var $adUnitData,exclusions,exclusionsGroup,googleAdUnit,targeting,valueTrimmed;googleAdUnit=void 0,$adUnitData=$adUnit.data(storeAs),$adUnitData||(dfpID=dfpID.replace(/(\/\/)+/gi,"/").replace(/\s+/gi,"").replace(/(\/)$/,"/"),0!==dfpID.indexOf("/")&&(dfpID="/"+dfpID),googleAdUnit=$adUnit.data("outofpage")?window.googletag.defineOutOfPageSlot(dfpID,adUnitID).addService(window.googletag.pubads()):window.googletag.defineSlot(dfpID,dimensions,adUnitID).addService(window.googletag.pubads()),targeting=$adUnit.data("targeting"),targeting&&("string"==typeof targeting&&(targeting=eval("("+targeting+")")),$.each(targeting,function(e,t){"brand"===e&&sessionStorageX.setItem("brand",t),googleAdUnit.setTargeting(e,t)})),exclusions=$adUnit.data("exclusions"),exclusions&&(exclusionsGroup=exclusions.split(","),valueTrimmed=void 0,$.each(exclusionsGroup,function(e,t){valueTrimmed=$.trim(t),valueTrimmed.length>0&&googleAdUnit.setCategoryExclusion(valueTrimmed)})),googleAdUnit.oldRenderEnded=googleAdUnit.oldRenderEnded||googleAdUnit.renderEnded,googleAdUnit.renderEnded=function(){var e;rendered++,e=$adUnit.css("display"),$adUnit.removeClass("display-none").addClass("display-"+e),"function"==typeof dfpOptions.afterEachAdLoaded&&dfpOptions.afterEachAdLoaded.call(this,$adUnit),"function"==typeof dfpOptions.afterAllAdsLoaded&&rendered===count&&dfpOptions.afterAllAdsLoaded.call(this,$adCollection)},$adUnit.data(storeAs,googleAdUnit))})}),window.googletag.cmd.push(function(){var e,t;"undefined"==typeof dfpOptions.setTargeting.brand&&sessionStorageX.getItem("brand")&&(dfpOptions.setTargeting.brand=sessionStorageX.getItem("brand")),dfpOptions.enableSingleRequest===!0&&window.googletag.pubads().enableSingleRequest(),$.each(dfpOptions.setTargeting,function(e,t){"brand"===e&&sessionStorageX.setItem("brand",t),window.googletag.pubads().setTargeting(e,t)}),"object"==typeof dfpOptions.setLocation&&("number"==typeof dfpOptions.setLocation.latitude&&"number"==typeof dfpOptions.setLocation.longitude&&"number"==typeof dfpOptions.setLocation.precision?window.googletag.pubads().setLocation(dfpOptions.setLocation.latitude,dfpOptions.setLocation.longitude,dfpOptions.setLocation.precision):"number"==typeof dfpOptions.setLocation.latitude&&"number"==typeof dfpOptions.setLocation.longitude&&window.googletag.pubads().setLocation(dfpOptions.setLocation.latitude,dfpOptions.setLocation.longitude)),dfpOptions.setCategoryExclusion.length>0&&(e=dfpOptions.setCategoryExclusion.split(","),t=void 0,$.each(e,function(e,n){t=$.trim(n),t.length>0&&window.googletag.pubads().setCategoryExclusion(t)})),dfpOptions.collapseEmptyDivs&&window.googletag.pubads().collapseEmptyDivs(),dfpOptions.disablePublisherConsole===!0&&window.googletag.pubads().disablePublisherConsole(),dfpOptions.disableInitialLoad===!0&&window.googletag.pubads().disableInitialLoad(),dfpOptions.noFetch===!0&&window.googletag.pubads().noFetch(),window.googletag.enableServices()})},displayAds=function(){var e;e=[],$adCollection.each(function(){var t,n;t=$(this),n=t.data(storeAs),dfpOptions.refreshExisting&&n&&t.data("gsnDfpExisting")?e.push(n):(t.data("gsnDfpExisting",!0),window.googletag.cmd.push(function(){window.googletag.display(t.attr("id"))}))}),e.length>0&&window.googletag.cmd.push(function(){window.googletag.pubads().refresh(e)})},getID=function(e,t,n){return dfpOptions.refreshExisting||(e.data(storeAs,null),e.data("gsnDfpExisting",null),e.attr("id")&&e.attr("id",t+"-auto-gen-id-"+n)),e.attr("id")||e.attr("id",t+"-auto-gen-id-"+n).attr("id")},getDimensions=function(e){var t,n,i;return n=[],i=e.data("dimensions"),i?(t=i.split(","),$.each(t,function(e,t){var i;i=t.split("x"),n.push([parseInt(i[0],10),parseInt(i[1],10)])})):n.push([e.width(),e.height()]),n},dfpLoader=function(){var e,t,n;dfpIsLoaded=dfpIsLoaded||$('script[src*="googletagservices.com/tag/js/gpt.js"]').length,dfpIsLoaded||(window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[],e=document.createElement("script"),e.async=!0,e.type="text/javascript",e.onerror=function(){dfpBlocked()},n="https:"===document.location.protocol,e.src=(n?"https:":"http:")+"//www.googletagservices.com/tag/js/gpt.js",t=document.getElementsByTagName("script")[0],t.parentNode.insertBefore(e,t),"none"===e.style.display&&dfpBlocked())},dfpBlocked=function(){var e;e=window.googletag.cmd,setTimeout(function(){var t;t=function(e,t,n){return window.googletag.ads.push(n),window.googletag.ads[n]={renderEnded:function(){},addService:function(){return this}},window.googletag.ads[n]},window.googletag={cmd:{push:function(e){e.call(dfpScript)}},ads:[],pubads:function(){return this},noFetch:function(){return this},disableInitialLoad:function(){return this},disablePublisherConsole:function(){return this},enableSingleRequest:function(){return this},setTargeting:function(){return this},collapseEmptyDivs:function(){return this},enableServices:function(){return this},defineSlot:function(e,n,i){return t(e,n,i,!1)},defineOutOfPageSlot:function(e,n){return t(e,[],n,!0)},display:function(e){return window.googletag.ads[e].renderEnded.call(dfpScript),this}},$.each(e,function(e,t){window.googletag.cmd.push(t)})},50)},$.gsnSw2=$.fn.gsnSw2=function(e,t){var n;return t=t||{},void 0===e&&(e=dfpID),"object"==typeof e&&(t=e,e=t.dfpID||dfpID),n=this,"function"==typeof this&&(n=dfpSelector),$(t.displayWhenExists||".gsnunit").length&&init(e,n,t),this}}(window.jQuery||window.Zepto||window.tire,window,document),function(e){"use strict";var t;t={init:function(t){var n;return n={top:"auto",autoOpen:!1,overlayOpacity:.5,overlayColor:"#000",overlayClose:!0,overlayParent:"body",closeOnEscape:!0,closeButtonClass:".close",transitionIn:"",transitionOut:"",onOpen:!1,onClose:!1,zIndex:function(){return function(e){return e===-1/0?0:e+1}(Math.max.apply(Math,e.makeArray(e("*").map(function(){return e(this).css("z-index")}).filter(function(){return e.isNumeric(this)}).map(function(){return parseInt(this,10)}))))},updateZIndexOnOpen:!1,adClass:"gsnsw"},t=e.extend(n,t),this.each(function(){var n,i,o;o=t,i=e('<div class="lean-overlay"></div>'),n=e(this),i.css({display:"none",position:"absolute","z-index":2147483640,top:0,left:0,height:"100%",width:"100%",background:o.overlayColor,opacity:o.overlayOpacity,overflow:"auto"}).appendTo(o.overlayParent),n.css({display:"none",position:"absolute","z-index":2147483647,left:window.devicePixelRatio>=2?"33%":"50%",top:parseInt(o.top,10)>-1?o.top+"px":"50%"}),n.bind("openModal",function(){var e,t;t=o.updateZIndexOnOpen?o.zIndex():parseInt(i.css("z-index"),10),e=t+1,""!==o.transitionIn&&""!==o.transitionOut&&n.removeClass(o.transitionOut).addClass(o.transitionIn),n.css({display:"block","margin-left":window.devicePixelRatio>=2?0:-(n.outerWidth()/2)+"px","margin-top":(parseInt(o.top,10)>-1?0:-(n.outerHeight()/2))+"px","z-index":e}),i.css({"z-index":t,display:"block"}),o.onOpen&&"function"==typeof o.onOpen&&o.onOpen(n[0])}),n.bind("closeModal",function(){""!==o.transitionIn&&""!==o.transitionOut?(n.removeClass(o.transitionIn).addClass(o.transitionOut),n.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){n.css("display","none"),i.css("display","none")})):(n.css("display","none"),i.css("display","none")),o.onClose&&"function"==typeof o.onClose&&o.onClose(n[0])}),i.click(function(){o.overlayClose}),e(document).keydown(function(e){o.closeOnEscape&&27===e.keyCode&&n.trigger("closeModal")}),n.on("click",o.adClass,function(e){n.trigger("closeModal"),e.preventDefault()}),n.on("click",o.closeButtonClass,function(e){n.trigger("closeModal"),e.preventDefault()}),o.autoOpen&&n.trigger("openModal")})}},e.fn.easyModal=function(n){return t[n]?t[n].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof n&&n?void e.error("Method "+n+" does not exist on jQuery.easyModal"):t.init.apply(this,arguments)}}(window.jQuery||window.Zepto||window.tire),function(e,t,n,i,o){var s,d,a,r,l,g,c,p,u,f,w,m;if(w=n.sessionStorage,l=0,"undefined"==typeof w&&(w={getItem:function(){},setItem:function(){}}),m=void 0,f=void 0,g=t||{},u=g.Advertising,("undefined"==typeof u||!u.pluginLoaded)&&(s=function(){this.init()},s.prototype={init:function(){},pluginLoaded:!0,defaultActionParam:{page:void 0,evtname:"",dept:void 0,deviceid:"",storeid:"",consumerid:"",isanon:!1,loyaltyid:"",aisle:"",category:"",shelf:"",brand:"",pcode:"",pdesc:"",latlng:[0,0],evtcategory:"",evtvalue:0},data:{},isDebug:!1,gsnid:0,selector:"body",apiUrl:"https://clientapi.gsn2.com/api/v1",gsnNetworkId:"/6394/digitalstore.test",gsnNetworkStore:void 0,onAllEvents:void 0,oldGsnAdvertising:u,minSecondBetweenRefresh:5,enableCircPlus:!1,disablesw:!1,isLoading:!1,targetting:{},depts:[],circPlusBody:void 0,refreshExisting:{circPlus:!1,pods:!1},trigger:function(t,i){t.indexOf("gsnevent")<0&&(t="gsnevent:"+t),n.setTimeout(function(){f?f.event.trigger({type:t,detail:i}):e.event.trigger({type:t,detail:i}),"function"==typeof this.onAllEvents&&this.onAllEvents({type:t,detail:i})},100)},on:function(t,n){t.indexOf("gsnevent")<0&&(t="gsnevent:"+t),e(i).on(t,n)},off:function(t,n){t.indexOf("gsnevent")<0&&(t="gsnevent:"+t),e(i).off(t,n)},log:function(e){return console&&console.log(e),this},cleanKeyword:function(e){var t;return t=e.replace(/[^a-zA-Z0-9]+/gi,"_").replace(/^[_]+/gi,""),null!=t.toLowerCase&&(t=t.toLowerCase()),t},addDept:function(e){var t,n,i,o,s,d;if(d=g.Advertising,e){for(s=d.depts,t=[],n={},t.unshift(d.cleanKeyword(e)),i=0,o=s.length;o>i;i++)e=s[i],null!=n[e]&&t.push(e),n[e]=1;for(;t.length>5;)t.pop();return d.depts=t}},ajaxFireUrl:function(t,n){var i,o;if("string"==typeof t){if(t.length<10)return;t=t.replace("%%CACHEBUSTER%%",(new Date).getTime()),n?(e.ajax({async:!1,url:t}),i=t.indexOf("adurl="),i>0&&(o=t.substr(i+6),this.ajaxFireUrl(o,n))):(a(),m.src=t)}},clickProduct:function(e,t,n,i,o,s,d,a,r,l,g,c,p){this.ajaxFireUrl(e),this.trigger("clickProduct",{myPlugin:this,CategoryId:t,BrandName:n,Description:i,ProductCode:o,DisplaySize:d,RegularPrice:a,CurrentPrice:r,SavingsAmount:l,SavingsStatement:g,AdCode:c,CreativeId:p,Quantity:s||1})},clickBrickOffer:function(e,t){this.ajaxFireUrl(e),this.trigger("clickBrickOffer",{myPlugin:this,OfferCode:t||0})},clickBrand:function(e,t){this.ajaxFireUrl(e),this.setBrand(t),this.trigger("clickBrand",{myPlugin:this,BrandName:t})},clickPromotion:function(e,t){this.ajaxFireUrl(e),this.trigger("clickPromotion",{myPlugin:this,AdCode:t})},clickRecipe:function(e,t){this.ajaxFireUrl(e),this.trigger("clickRecipe",{RecipeId:t})},clickLink:function(e,t,n){(void 0===n||""===n)&&(n="_top"),this.ajaxFireUrl(e),this.trigger("clickLink",{myPlugin:this,Url:t,Target:n})},setBrand:function(e){this.data.BrandName=e,w.setItem("Gsn.Advertisement.data.BrandName",e)},getBrand:function(){return this.data.BrandName||w.getItem("Gsn.Advertisement.data.BrandName")},actionHandler:function(t){var n,i,o,s,d;return s=g.Advertising,i=t.target?t.target:t.srcElement,d=e(i),o={},n=d.data(),e.each(n,function(e,t){/^gsn/gi.test(e)&&(o[e.replace("gsn","").toLowerCase()]=t)}),s.refreshAdPods(o),s},refreshAdPodsInternal:function(t,n){var i,o,s,d;return s=g.Advertising,o={},e.extend(o,s.defaultActionParam),t&&e.extend(o,t),s.isDebug&&s.log(JSON.stringify(o)),i=0>=l||(new Date).getTime()/1e3-l>=s.minSecondBetweenRefresh,(n||i)&&(l=(new Date).getTime()/1e3,s.addDept(o.dept),n&&(s.refreshExisting.pods=!1,s.refreshExisting.circPlus=!1),d={dept:s.depts||[],brand:s.getBrand()},o.page&&(d.kw=o.page.replace(/[^a-z]/gi,"")),e.gsnDfp({dfpID:s.gsnNetworkId.replace(/\/$/gi,"")+(s.gsnNetworkStore||""),setTargeting:d,refreshExisting:s.refreshExisting.pods}),s.refreshExisting.pods=!0,s.enableCircPlus&&(d.depts||(d.depts=[]),d.depts.length<=0&&(d.depts=["produce"]),e.circPlus({dfpID:s.gsnNetworkId.replace(/\/$/gi,"")+(s.gsnNetworkStore||""),setTargeting:d,circPlusBody:s.circPlusBody,refreshExisting:s.refreshExisting.circPlus}),s.refreshExisting.circPlus=!0)),s},refreshAdPods:function(t,n){var i;return i=g.Advertising,i.isLoading?i:e(".gsnadunit,.gsnunit").length<=0?i:void(i.gsnid&&(i.isLoading=!0,e.gsnSw2({displayWhenExists:".gsnadunit,.gsnunit",onData:function(e){return e.cancel=i.disablesw},onClose:function(){return i.selector&&(e(i.selector).on("click",".gsnaction",i.actionHandler),i.selector=void 0),i.isLoading=!1,i.refreshAdPodsInternal(t,n)}})))},setDefault:function(t){var n;return n=this,e.extend(n.defaultActionParam,t)},load:function(e,t){var n;return n=g.Advertising,e&&(n.gsnid=e,n.isDebug||(n.isDebug=t)),n.refreshAdPods(null,!0),n}},p=new s,g.Advertising=p,g.Advertising.brickRedirect=p.clickBrickOffer,g.Advertising.clickBrand=p.clickBrand,g.Advertising.clickThru=p.clickProduct,g.Advertising.logAdImpression=function(){},g.Advertising.logAdRequest=function(){},g.Advertising.promotionRedirect=p.clickPromotion,g.Advertising.verifyClickThru=p.clickLink,g.Advertising.recipeRedirect=p.clickRecipe,n.Gsn=g,"undefined"!=typeof o&&(g.Advertising.on("clickRecipe",function(e){"gsnevent:clickRecipe"===e.type&&n.location.replace("/Recipes/RecipeFull.aspx?recipeid="+e.detail.RecipeId)}),g.Advertising.on("clickProduct",function(e){var t,n;
"gsnevent:clickProduct"===e.type&&(t=e.detail,t&&(n=new String(""),n+=d("DepartmentID",t.CategoryId),n+="~",n+=d("BrandName",t.BrandName),n+="~",n+=d("ProductDescription",t.Description),n+="~",n+=d("ProductCode",t.ProductCode),n+="~",n+=d("DisplaySize",t.DisplaySize),n+="~",n+=d("RegularPrice",t.RegularPrice),n+="~",n+=d("CurrentPrice",t.CurrentPrice),n+="~",n+=d("SavingsAmount",t.SavingsAmount),n+="~",n+=d("SavingsStatement",t.SavingsStatement),n+="~",n+=d("Quantity",t.Quantity),n+="~",n+=d("AdCode",t.AdCode),n+="~",n+=d("CreativeID",t.CreativeId),"function"==typeof AddAdToShoppingList&&AddAdToShoppingList(n)))}),g.Advertising.on("clickLink",function(e){var t;"gsnevent:clickLink"===e.type&&(t=e.detail,t&&((void 0===t.Target||""===t.Target)&&(t.Target="_top"),"_blank"===t.Target?n.open(t.Url):n.location.replace(t.Url)))}),g.Advertising.on("clickPromotion",function(e){var t;"gsnevent:clickPromotion"===e.type&&(t=e.detail,t&&n.location.replace("/Ads/Promotion.aspx?adcode="+t.AdCode))}),g.Advertising.on("clickBrickOffer",function(e){var t,i;"gsnevent:clickBrickOffer"===e.type&&(t=e.detail,t&&(i=g.Advertising.apiUrl+"/profile/BrickOffer/"+o.ConsumerID+"/"+t.OfferCode,n.open(i,"")))})),n.top)){c=null;try{c=n.top.$}catch(h){r=h,c=n.parent.$}c!==e&&(f=c)}}(window.jQuery||window.Zepto||window.tire,window.Gsn||{},window,document,window.GSNContext),function(){var e,t,n,i,o,s,d,a,r,l,g,c;if(e=Gsn.Advertising){for(t={debug:function(t){return"string"==typeof t?e.isDebug="false"!==t:void 0},api:function(t){return"string"==typeof t?e.apiUrl=t:void 0},gsnid:function(t){return t?e.gsnid=t:void 0},disablesw:function(t){return"string"==typeof t?e.disablesw="false"!==t:void 0},selector:function(t){return"string"==typeof t?e.selector=t:void 0}},l=document.getElementsByTagName("script"),i=0,d=l.length;d>i;i++)if(c=l[i],/gsndfp/.test(c.src))for(g=["","data-"],o=0,a=g.length;a>o;o++){r=g[o];for(s in t)(n=t[s])(c.getAttribute(r+s))}e.load()}}(window.jQuery||window.Zepto||window.tire);